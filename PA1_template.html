<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="author" content="Roby Bhattacharyya" />

<meta name="date" content="2015-05-14" />

<title>Reproducible Research, Assignment 1</title>

<script src="PA1_template_files/jquery-1.11.0/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="PA1_template_files/bootstrap-3.3.1/css/bootstrap.min.css" rel="stylesheet" />
<script src="PA1_template_files/bootstrap-3.3.1/js/bootstrap.min.js"></script>
<script src="PA1_template_files/bootstrap-3.3.1/shim/html5shiv.min.js"></script>
<script src="PA1_template_files/bootstrap-3.3.1/shim/respond.min.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<link rel="stylesheet"
      href="PA1_template_files/highlight/default.css"
      type="text/css" />
<script src="PA1_template_files/highlight/highlight.js"></script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img { 
  max-width:100%; 
  height: auto; 
}
</style>
<div class="container-fluid main-container">


<div id="header">
<h1 class="title">Reproducible Research, Assignment 1</h1>
<h4 class="author"><em>Roby Bhattacharyya</em></h4>
<h4 class="date"><em>May 14, 2015</em></h4>
</div>


<div id="reproducible-research-assignment-1" class="section level1">
<h1>Reproducible Research, Assignment 1</h1>
<p>Roby<br />14 May 2015</p>
<div id="assignment" class="section level2">
<h2>Assignment</h2>
<p>Thanks for reading! This is my first time trying RMarkdown.<br />For this assignment, we are trying to display activity patterns from data generated by personal monitoring equipment. This document should walk us through the steps required for these simple analyses.</p>
<div id="a.-loading-and-pre-processing-data" class="section level3">
<h3>A. Loading and pre-processing data</h3>
<p>First a quick check - before executing this code, be sure the <strong>correct working directory</strong> is selected - specifically, the present working directory must contain the data file entitled <em>“activity.csv”</em>. The following code should check that:</p>
<pre class="r"><code>getwd()</code></pre>
<pre><code>## [1] &quot;/Users/robysf/Documents/Fellowship/Coursera/Reproducible_Research/RepData_PeerAssessment1&quot;</code></pre>
<pre class="r"><code>list.files()</code></pre>
<pre><code>##  [1] &quot;activity.csv&quot;         &quot;activity.zip&quot;         &quot;doc&quot;                 
##  [4] &quot;instructions_fig&quot;     &quot;old_PA1_template.Rmd&quot; &quot;PA1_template_files&quot;  
##  [7] &quot;PA1_template.html&quot;    &quot;PA1_template.md&quot;      &quot;PA1_template.Rmd&quot;    
## [10] &quot;README.md&quot;</code></pre>
<pre class="r"><code>ifelse(file.exists(&quot;activity.csv&quot;), print(&quot;Looks good!&quot;), print(&quot;Hmmm...can&#39;t find activity.csv&quot;))</code></pre>
<pre><code>## [1] &quot;Looks good!&quot;</code></pre>
<pre><code>## [1] &quot;Looks good!&quot;</code></pre>
<p>If it couldn’t find the file, try changing the working directory. If it said “Looks good!”, then we’re ready to proceed. (I’m not sure why it says “Looks good!” twice…)</p>
<p>Now that we’re in the right place, let’s load two packages that I will use:<br /> - <strong>dplyr</strong> for data manipulation<br /> - <strong>ggplot2</strong> for plotting</p>
<pre class="r"><code>if(!require(&quot;dplyr&quot;)) install.packages(&quot;dplyr&quot;)</code></pre>
<pre><code>## Loading required package: dplyr
## 
## Attaching package: &#39;dplyr&#39;
## 
## The following object is masked from &#39;package:stats&#39;:
## 
##     filter
## 
## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<pre class="r"><code>library(dplyr)
if(!require(&quot;ggplot2&quot;)) install.packages(&quot;ggplot2&quot;)</code></pre>
<pre><code>## Loading required package: ggplot2</code></pre>
<pre class="r"><code>library(ggplot2)</code></pre>
<div id="load-data-and-2.-processtransform-data" class="section level4">
<h4>1. Load data and 2. Process/transform data:</h4>
<p>The following code reads the data file into a data.frame, and then converts the date column from characters to dates.</p>
<pre class="r"><code>actData &lt;- read.csv(file = &quot;activity.csv&quot;, header = TRUE, stringsAsFactors = FALSE)
actData$date &lt;- as.Date(actData$date)</code></pre>
</div>
</div>
<div id="b.-determine-steps-per-day" class="section level3">
<h3>B. Determine steps per day</h3>
<div id="calculate-total-number-of-steps-per-day" class="section level4">
<h4>1. Calculate total number of steps per day</h4>
<p>I use the <strong>dplyr</strong> package to first group data by day, then summarize by average number of steps per day (removing all NA values).</p>
<pre class="r"><code>actData_byDay &lt;- group_by(actData, date)
actData_byDay_sumSteps &lt;- summarize(actData_byDay, stepsPerDay = sum(steps, na.rm = TRUE))</code></pre>
</div>
<div id="plot-histogram-of-steps-per-day" class="section level4">
<h4>2. Plot histogram of steps per day</h4>
<p>Using the qplot() feature of <strong>ggplot2</strong></p>
<pre class="r"><code>hist(actData_byDay_sumSteps$stepsPerDay, breaks = 10, 
     main = &quot;Histogram of steps per day from activity data&quot;, xlab = &quot;Steps per day&quot;)</code></pre>
<p><img src="PA1_template_files/figure-html/histoPlot1_stepsPerDay-1.png" /></p>
</div>
<div id="calculate-and-report-mean-number-of-steps-per-day" class="section level4">
<h4>3. Calculate and report mean number of steps per day</h4>
<p>This code should be fairly straightforward.</p>
<pre class="r"><code>medianSteps &lt;- median(actData_byDay_sumSteps$stepsPerDay)
meanSteps &lt;- mean(actData_byDay_sumSteps$stepsPerDay)
print(paste(&quot;The median number of steps per day is:&quot;, medianSteps))</code></pre>
<pre><code>## [1] &quot;The median number of steps per day is: 10395&quot;</code></pre>
<pre class="r"><code>print(paste(&quot;The mean number of steps per day is:&quot;, meanSteps))</code></pre>
<pre><code>## [1] &quot;The mean number of steps per day is: 9354.22950819672&quot;</code></pre>
</div>
</div>
<div id="c.-average-daily-activity-pattern" class="section level3">
<h3>C. Average daily activity pattern</h3>
<div id="time-series-plot" class="section level4">
<h4>1. Time series plot</h4>
<p>The goal here is to make a plot with each 5-minute interval across a day on the x-axis, and the number of steps taken in that interval (averaged across all days) on the y-axis. I’ll use <strong>dplyr</strong> to group by interval, then calculate the mean number of steps during each interval (across all days), and finally plot the resulting data.</p>
<pre class="r"><code>actData_byInterval &lt;- group_by(actData, interval)
actData_byInterval_avgSteps &lt;- summarize(actData_byInterval, 
                                         avgSteps = mean(steps, na.rm = TRUE))
qplot(x = interval, y = avgSteps, data = actData_byInterval_avgSteps, geom = &quot;line&quot;, 
      main = &quot;Activity plot: mean number of steps during the course of a day&quot;) + 
        theme(plot.title = element_text(face = &quot;bold&quot;, vjust = 1))</code></pre>
<p><img src="PA1_template_files/figure-html/timePlot1_stepsPerInterval-1.png" /></p>
</div>
<div id="which-time-interval-contains-the-most-steps" class="section level4">
<h4>2. Which time interval contains the most steps?</h4>
<p>I use which.max() to identify the index of the most common, and then use that to slice/subset the grouped, summarized dataset to identify the value of that interval.</p>
<pre class="r"><code>maxInterval &lt;- actData_byInterval_avgSteps$interval[which.max(actData_byInterval_avgSteps$avgSteps)]
print(paste(&quot;the interval with the most steps is:&quot;, maxInterval))</code></pre>
<pre><code>## [1] &quot;the interval with the most steps is: 835&quot;</code></pre>
<p>So, it looks like there’s a fairly uniform morning commute time that causes a spike?</p>
</div>
</div>
<div id="d.-impute-missing-values" class="section level3">
<h3>D. Impute missing values</h3>
<p>Now, rather than removing NA’s, I’ll replace them with best-estimates</p>
<div id="calculate-and-report-number-of-missing-values-in-dataset" class="section level4">
<h4>1. Calculate and report number of missing values in dataset</h4>
<p>Just using sum(is.na())</p>
<pre class="r"><code>totalNAsteps &lt;- sum(is.na(actData$steps))
print(paste(&quot;The total number of NAs in the dataset is:&quot;, totalNAsteps))</code></pre>
<pre><code>## [1] &quot;The total number of NAs in the dataset is: 2304&quot;</code></pre>
</div>
<div id="devise-strategy-to-fill-in-these-missing-values" class="section level4">
<h4>2. Devise strategy to fill in these missing values</h4>
<p>For each missing value at a given time interval, I opted to just fill in the average value for that same time interval from all other days for which it was measured.</p>
</div>
<div id="create-a-new-dataset-with-missing-values-filled-in" class="section level4">
<h4>3. Create a new dataset with missing values filled in</h4>
<p>For this, I’ll first copy the original data.frame, then use replace() to identify locations where NA values are found, and substitute the average number of steps for that time interval (calculated from the na.rm data.frame above).</p>
<pre class="r"><code>actDataImputed &lt;- actData
actDataImputed$steps &lt;- replace(actDataImputed$steps, is.na(actDataImputed$steps),
                         actData_byInterval_avgSteps$avgSteps)</code></pre>
<p>This new data.frame, actDataImputed, now has replaced the original “steps” variable with a version in which all NAs are replaced by average values. We can see that it has worked by displaying the first 6 rows of the Imputed dataset compared to the original:</p>
<pre class="r"><code>head(actData)</code></pre>
<pre><code>##   steps       date interval
## 1    NA 2012-10-01        0
## 2    NA 2012-10-01        5
## 3    NA 2012-10-01       10
## 4    NA 2012-10-01       15
## 5    NA 2012-10-01       20
## 6    NA 2012-10-01       25</code></pre>
<pre class="r"><code>head(actDataImputed)</code></pre>
<pre><code>##       steps       date interval
## 1 1.7169811 2012-10-01        0
## 2 0.3396226 2012-10-01        5
## 3 0.1320755 2012-10-01       10
## 4 0.1509434 2012-10-01       15
## 5 0.0754717 2012-10-01       20
## 6 2.0943396 2012-10-01       25</code></pre>
</div>
<div id="a.-plot-histogram-of-total-steps-per-day-from-imputed-data" class="section level4">
<h4>4a. Plot histogram of total steps per day from imputed data</h4>
<p>Code is similar to that for generating the histogram above for raw data with NA’s removed.</p>
<pre class="r"><code>actDataImputed_byDay &lt;- group_by(actDataImputed, date)
actDataImputed_byDay_sumSteps &lt;- summarize(actDataImputed_byDay, stepsPerDay = sum(steps))
hist(actDataImputed_byDay_sumSteps$stepsPerDay, breaks = 10, 
     main = &quot;Histogram of steps per day from imputed activity data&quot;, xlab = &quot;Steps per day&quot;)</code></pre>
<p><img src="PA1_template_files/figure-html/histoPlot2_imputedStepsPerDay-1.png" /></p>
</div>
<div id="b.-calculate-and-report-mean-and-median-number-of-steps-from-imputed-data" class="section level4">
<h4>4b. Calculate and report mean and median number of steps from imputed data</h4>
<p>Code is similar to the above for raw data with NA’s removed.</p>
<pre class="r"><code>medianStepsImputed &lt;- median(actDataImputed_byDay_sumSteps$stepsPerDay)
meanStepsImputed &lt;- mean(actDataImputed_byDay_sumSteps$stepsPerDay)
print(paste(&quot;The median number of steps per day from imputed data is:&quot;, medianStepsImputed))</code></pre>
<pre><code>## [1] &quot;The median number of steps per day from imputed data is: 10766.1886792453&quot;</code></pre>
<pre class="r"><code>print(paste(&quot;The mean number of steps per day from imputed data is:&quot;, meanStepsImputed))</code></pre>
<pre><code>## [1] &quot;The mean number of steps per day from imputed data is: 10766.1886792453&quot;</code></pre>
<p>Note that in the imputed data, the mean and median are <em>exactly the same!</em>. This is because my method of imputing missing values replaced the missing values with the average missing values for that time interval. This changed the histogram, but NOT the average at each interval. Since the histogram changed (essentially removing days on which there were no steps recorded - simply because the device was not worn), the relationship between the median and mean changed. And in particular, since several days had no measurements at all and were thus replaced with the average (mean), these were positioned at the median and thus the median appears to be the same as the mean. The mode will be the same as the mean now too, since multiple days were basically artificially set to the mean.</p>
</div>
</div>
<div id="e.-weekend-vs-weekday-patterns" class="section level3">
<h3>E. Weekend vs weekday patterns</h3>
<div id="create-new-factor-variable-with-two-levels-weekday-and-weekend" class="section level4">
<h4>1. Create new factor variable with two levels, weekday and weekend</h4>
<p>I first use the weekdays() function to assign each date to a day of the week, then mutate() from the <strong>dplyr</strong> package to convert these to a two-factor variable.</p>
<pre class="r"><code>actData$dayOfWeek &lt;- weekdays(actData$date)
actDataWeekends &lt;- mutate(actData, dayType = ifelse(actData$dayOfWeek 
                                                    %in% c(&quot;Saturday&quot;, &quot;Sunday&quot;),
                                                    &quot;Weekend&quot;, &quot;Weekday&quot;))</code></pre>
</div>
<div id="make-lineplots-of-average-steps-per-time-interval-on-weekdays-vs-weekends" class="section level4">
<h4>2. Make lineplots of average steps per time interval on weekdays vs weekends</h4>
<p>Because this is plotting average steps across all days, it doesn’t matter if this is done on the raw or imputed datasets (b/c averages per interval will be the same, at least by my method of imputation).</p>
<p>Similar to above, I’m using <strong>dplyr</strong> for data manipulations (grouping by dayType and plotting across intervals for each dayType), and then using the qplot() function of <strong>ggplot2</strong> for plotting.</p>
<pre class="r"><code>actDataWeekends_grouped &lt;- group_by(actDataWeekends, dayType, interval)
actDataWeekends_summary &lt;- summarize(actDataWeekends_grouped, meanSteps = mean(steps, na.rm = TRUE))
qplot(x = interval, y = meanSteps, data = actDataWeekends_summary, 
                   main = &quot;Raw activity plots, weekdays vs weekends&quot;, geom = &quot;line&quot;) + 
        facet_wrap(~dayType, ncol = 1) + theme(plot.title = element_text(vjust = 1, 
                                                                         face = &quot;bold&quot;))</code></pre>
<p><img src="PA1_template_files/figure-html/timePlot2_stepsByDayType-1.png" /></p>
<p>Looks like people sleep in more on the weekends, and don’t have the spike during morning commute like they do on the weekdays. But through the day, they are on average more mobile.</p>
<p>OK, I think that’s everything! Thanks for reading. Sorry if this was overly wordy.</p>
</div>
</div>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
